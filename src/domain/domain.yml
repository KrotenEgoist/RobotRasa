version: "3.1"

intents:
  - command_move_subject
  - nlu_fallback:
      use_entities: []
  - wrong_command:
      use_entities: []

entities:
  - action
  - subject:
      roles:
        - object
        - direction
        - addition
  - distance
  - relation

slots:
  action:
    type: text
    mappings:
      - type: from_entity
        entity: action

  subject:
    type: text
    mappings:
      - type: from_entity
        entity: subject
        role: object
#        conditions:
#          - active_loop: subject_form
#            requested_slot: subject
      - type: from_entity
        entity: subject
        role: direction
#        conditions:
#          - active_loop: subject_form
#            requested_slot: subject

#  addition:
#    type: list
#    mappings:
#      - type: from_entity
#        entity: subject
#        role: addition
#
#  relation:
#    type: list
#    mappings:
#      - type: from_entity
#        entity: relation
#
#  distance:
#    type: text
#    mappings:
#      - type: from_entity
#        entity: distance

  feature:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: feature_form
            requested_slot: feature

forms:
  subject_form:
    required_slots:
      - subject
  feature_form:
    required_slots:
      - feature

responses:
  utter_send_command:
    - text: "Команда отправлена: {action} {subject} {feature}"
  utter_wrong_command:
    - text: "Исправляем команду"
  utter_rephrase:
    - text: "Перефразируйте"

actions:
  - action_ask_feature
  - validate_feature_form
  - action_ask_subject
  - action_reset_slots


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
