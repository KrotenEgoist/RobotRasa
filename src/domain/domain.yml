version: "3.1"

intents:
  - action
  - directions
  - objects
  - action+directions
  - action+objects
  - wrong_command

entities:
  - action:
      roles:
        - analyze
        - around
        - find
        - follow
        - monitor
        - move
        - patrol
        - rotate
        - stop
  - subject:
      roles:
        - direction
        - object
  - distance
  - relation

slots:
  subject:
    type: text
    mappings:
      - type: from_entity
        entity: subject
        role: direction
      - type: from_entity
        entity: subject
        role: object

  relation:
    type: list
    mappings:
      - type: from_entity
        entity: relation

  distance:
    type: text
    mappings:
      - type: from_entity
        entity: distance

  feature:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: feature_form
            requested_slot: feature

forms:
  subject_form:
    required_slots:
      - subject
  relation_form:
    required_slots:
      - relation
  distance_form:
    required_slots:
      - distance
  feature_form:
    required_slots:
      - feature

responses:
  utter_send_command:
    - text: "Команда отправлена {subject} {relation} {distance}"
  utter_wrong_command:
    - text: "Исправляем команду"
  utter_rephrase:
    - text: "Перефразируйте"

  utter_ask_feature:
    - text: "Уточните команду"
  utter_ask_subject:
    - text: "Назовите объект или местоимение"
  utter_ask_distance:
    - text: "Укажите количество метров"
  utter_ask_relation:
    - text: "Укажите местоположение объекта"

actions:
  - action_reset_slots


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
