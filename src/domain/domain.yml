version: "3.1"

intents:
  - command_move_subject
  - wrong_command:
      use_entities: []

entities:
  - action
  - subject:
      roles:
        - object
        - direction
        - addition
  - distance
  - temperature
  - relation

slots:
  action:
    type: text
    mappings:
      - type: from_entity
        entity: action

  subject:
    type: text
    mappings:
      - type: from_entity
        entity: subject
        role: object
      - type: from_entity
        entity: subject
        role: direction

  addition:
    type: list
    mappings:
      - type: from_entity
        entity: subject
        role: addition

  relation:
    type: list
    mappings:
      - type: from_entity
        entity: relation

  distance:
    type: text
    mappings:
      - type: from_entity
        entity: distance
      - type: from_entity
        entity: temperature

  feature:
    type: text
    mappings:
      - type: from_text
        conditions:
          - active_loop: feature_form
            requested_slot: feature

forms:
  subject_form:
    required_slots:
      - subject
  feature_form:
    required_slots:
      - feature

responses:
  utter_send_command:
    - text: "Команда отправлена: {action} {subject} {relation} {addition} {distance}"
  utter_wrong_command:
    - text: "Исправляем команду"
  utter_rephrase:
    - text: "Перефразируйте"

  utter_ask_subject:
    - text: "Назовите объект или направление"
  utter_ask_feature:
    - text: "Уточните команду"

actions:
  - action_reset_slots


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
